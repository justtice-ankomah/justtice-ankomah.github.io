"use strict";(self.webpackChunkHitMakerApp=self.webpackChunkHitMakerApp||[]).push([[501],{2501:(S,l,c)=>{c.r(l),c.d(l,{NotificationModule:()=>Z});var s=c(9808),p=c(7491),r=c(1083),f=c(5790),t=c(5e3),u=c(8966),m=c(5453),C=c(5159),h=c(6429),O=c(8023),M=c(7423),P=c(8140);function x(i,a){if(1&i&&(t.TgZ(0,"span",9)(1,"span"),t._uU(2),t.qZA()()),2&i){const n=t.oxw();t.xp6(2),t.Oqu(n.unreadNotifications<=10?n.unreadNotifications:"10+")}}function b(i,a){1&i&&t._UZ(0,"p",19)}function v(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"div",11)(1,"p",12)(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"div",13)(5,"div",14),t.NdJ("click",function(e){const g=t.CHM(n).$implicit;return t.oxw(2).onNotificationClicked(e,g)}),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"truncate"),t.qZA(),t._UZ(9,"p",15),t.YNc(10,b,1,0,"p",16),t.qZA(),t.TgZ(11,"p",17),t._uU(12),t.qZA(),t.TgZ(13,"p",18),t._uU(14),t.ALo(15,"date"),t.qZA()()()}if(2&i){const n=a.$implicit;t.xp6(3),t.Oqu(null==n?null:n.Content[0]),t.xp6(4),t.Oqu(t.Dn7(8,5,null==n?null:n.Content,40,"...")),t.xp6(3),t.Q6J("ngIf",!(null!=n&&n.IsRead)),t.xp6(2),t.Oqu(null==n?null:n.Content),t.xp6(2),t.Oqu(t.xi3(15,9,null==n?null:n.CreatedAt,"medium"))}}function N(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,v,16,12,"div",10),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.userNotifications)}}function k(i,a){1&i&&(t.TgZ(0,"div",20),t._UZ(1,"img",21),t.TgZ(2,"h3"),t._uU(3,"You haven't gotten any notifications yet"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"We'll alert you once something cool happens."),t.qZA()())}const y=[{path:"",pathMatch:"full",redirectTo:"notification"},{path:"notification",component:(()=>{class i{constructor(n,o,e,_,g,d,U){this.location=n,this.dialog=o,this.navService=e,this.router=_,this.authService=g,this.snackBarOpenerService=d,this.notificationService=U,this.subscription=[],this.userNotifications=[],this.unreadNotifications=0}ngOnInit(){this.subscribeTogetUserDetails(),this.subscribegetUserNotifications()}back(){this.location.back()}onNotificationClicked(n,o){let e=n.target;console.log(e,o),this.getClickedNotiElement(e),this.updateNotificationToRead(o)}getClickedNotiElement(n){let o=document.querySelectorAll(".noti_short_msg");for(var e=0;e<=o.length-1;e++)n==o[e]?this.showOrHideSiblingElement(n):n.parentElement==o[e]&&this.showOrHideSiblingElement(n.parentElement)}showOrHideSiblingElement(n){n.classList.toggle("active");var o=n.nextElementSibling;o.style.display="block"===o.style.display?"none":"block",n.parentElement.parentElement.classList.toggle("single_noti_back"),n.firstElementChild.classList.toggle("change")}updateNotificationToRead(n){n.IsRead||(n.IsRead=!0,this.notificationService.updateNotificationIsRead(n).subscribe({}),this.unreadNotifications>0&&(this.unreadNotifications-=1))}subscribeTogetUserDetails(){this.subscription.push(this.authService.userDetailsObservable.subscribe({next:n=>{this.loginUser=n,this.fetchUserNotificationDetails()},error:n=>{console.log(`inside <NotificationListComponent.subscrbToUserProfile()> ${"statuscode:"+n.status}  ${"message:"+n.message}`),"request_time_out"==n.message&&this.snackBarOpenerService.openToastSnackBar("Request time out",!0,4),0==n.status&&this.snackBarOpenerService.openToastSnackBar("Internet connection error",!0,4)},complete:()=>{}}))}subscribegetUserNotifications(){this.subscription.push(this.notificationService.userNotificationsObservable.subscribe({next:n=>{this.userNotifications=n.sort((o,e)=>e.Id-o.Id),console.log("user notifications",this.userNotifications),this.getUnreadNotifications()},error:n=>{console.log(`inside <HeaderComponent.subscribegetUserNotifications()> ${"statuscode:"+n.status}  ${"message:"+n.message}`),n.message==f.L.timeoutMsg&&this.snackBarOpenerService.openToastSnackBar("Request time out",!0,4),0==n.status&&this.snackBarOpenerService.openToastSnackBar("Internet connection error",!0,4)},complete:()=>{}}))}getUnreadNotifications(){let n=[];this.userNotifications.length>0&&(this.userNotifications.map(o=>{0==o.IsRead&&n.push(o)}),this.unreadNotifications=n.length)}fetchUserNotificationDetails(){null!=this.loginUser&&this.notificationService.getAllNotification(this.loginUser.Id)}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(s.Ye),t.Y36(u.uw),t.Y36(m.r),t.Y36(r.F0),t.Y36(C.e),t.Y36(h.N),t.Y36(O.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-notification-list"]],decls:11,vars:3,consts:[["id","container"],["id","backtitlenav"],["mat-flat-button","","id","backbtn",3,"click"],[1,"material-icons","md-36","backicon"],["id","notification"],["id","badge",4,"ngIf"],["id","noti_container"],[4,"ngIf"],["id","no_noti_cnt",4,"ngIf"],["id","badge"],["class","single_noti",4,"ngFor","ngForOf"],[1,"single_noti"],[1,"round_circle"],[1,"text_cnt"],[1,"noti_short_msg",3,"click"],[2,"width","2px"],["class","unread_msg_circle",4,"ngIf"],[1,"main_massage"],[1,"msg_date"],[1,"unread_msg_circle"],["id","no_noti_cnt"],["src","assets/images/notification.png ",1,"noti_img"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.back()}),t.TgZ(3,"span",3),t._uU(4,"arrow_back_ios"),t.qZA()(),t.TgZ(5,"h2",4),t._uU(6,"Notifications "),t.YNc(7,x,3,1,"span",5),t.qZA()(),t.TgZ(8,"div",6),t.YNc(9,N,2,1,"div",7),t.YNc(10,k,6,0,"div",8),t.qZA()()),2&n&&(t.xp6(7),t.Q6J("ngIf",o.unreadNotifications>0),t.xp6(2),t.Q6J("ngIf",(null==o.userNotifications?null:o.userNotifications.length)>0),t.xp6(1),t.Q6J("ngIf",0==(null==o.userNotifications?null:o.userNotifications.length)))},directives:[M.lW,s.O5,s.sg],pipes:[P.Bo,s.uU],styles:["#container[_ngcontent-%COMP%]{font-family:var(--opensans_font)}#container[_ngcontent-%COMP%]   #backtitlenav[_ngcontent-%COMP%]{display:flex;align-items:center;top:-5px;z-index:50;position:sticky;transition:all 1s ease;margin-top:10px;padding-bottom:12px;border-bottom:#989393 1px solid;padding-left:5px;padding-right:5px;background-color:var(--themcolor)}#container[_ngcontent-%COMP%]   #backtitlenav[_ngcontent-%COMP%]   #backbtn[_ngcontent-%COMP%]{border-radius:9px;height:30px;width:33px;display:flex;justify-content:center;align-items:center;min-width:30px;padding:0 0 0 7px;background-color:#fff}#container[_ngcontent-%COMP%]   #backtitlenav[_ngcontent-%COMP%]   .backicon[_ngcontent-%COMP%]{margin-bottom:0;display:flex;justify-content:center;align-items:center;font-size:14px;cursor:pointer;color:#000}#container[_ngcontent-%COMP%]   #notification[_ngcontent-%COMP%]{font-size:20px;font-weight:600;display:flex;align-items:center;margin:auto}#container[_ngcontent-%COMP%]   #notification[_ngcontent-%COMP%]   #badge[_ngcontent-%COMP%]{background-color:#ffc600;color:#000;text-align:center;border-radius:50%;font-weight:500;height:20px;width:20px;display:inline-block;position:relative;top:3px;margin-left:2px}#container[_ngcontent-%COMP%]   #notification[_ngcontent-%COMP%]   #badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin:auto;text-align:center;font-size:11px;position:relative;top:-6px}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]{padding:10px}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]   .single_noti[_ngcontent-%COMP%]{display:flex;margin:5px 5px 12px;align-items:center}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]   .single_noti[_ngcontent-%COMP%]   .round_circle[_ngcontent-%COMP%]{background-color:#fff6d7;color:#000;height:40px;width:40px;text-align:center;border-radius:50%;display:flex}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]   .single_noti[_ngcontent-%COMP%]   .round_circle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]   .single_noti[_ngcontent-%COMP%]   .text_cnt[_ngcontent-%COMP%]{width:100%;margin-left:12px}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]   .single_noti[_ngcontent-%COMP%]   .text_cnt[_ngcontent-%COMP%]   .noti_short_msg[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:all 2ms}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]   .single_noti[_ngcontent-%COMP%]   .text_cnt[_ngcontent-%COMP%]   .noti_short_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:4px!important;font-size:17px!important;font-weight:600!important}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]   .single_noti[_ngcontent-%COMP%]   .text_cnt[_ngcontent-%COMP%]   .noti_short_msg[_ngcontent-%COMP%]   .unread_msg_circle[_ngcontent-%COMP%]{height:8px;width:8px;border-radius:50%;background-color:#ffc600}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]   .single_noti[_ngcontent-%COMP%]   .text_cnt[_ngcontent-%COMP%]   .noti_short_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;width:90%}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]   .single_noti[_ngcontent-%COMP%]   .text_cnt[_ngcontent-%COMP%]   .noti_short_msg[_ngcontent-%COMP%]:hover{margin-left:11px}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]   .single_noti[_ngcontent-%COMP%]   .text_cnt[_ngcontent-%COMP%]   .main_massage[_ngcontent-%COMP%]{display:none;background-color:#fff;overflow:hidden;font-size:15px!important;font-weight:500!important;border-radius:2px;color:#000;padding:5px}#container[_ngcontent-%COMP%]   #noti_container[_ngcontent-%COMP%]   .single_noti[_ngcontent-%COMP%]   .text_cnt[_ngcontent-%COMP%]   .msg_date[_ngcontent-%COMP%]{margin:0;font-size:13px!important;font-weight:400}#container[_ngcontent-%COMP%]   #no_noti_cnt[_ngcontent-%COMP%]{margin:40% auto auto;text-align:center;padding:10px}#container[_ngcontent-%COMP%]   #no_noti_cnt[_ngcontent-%COMP%]   .noti_img[_ngcontent-%COMP%]{max-width:100%;width:15%;height:auto;background:#efefef;border-radius:50%;padding:14px}#container[_ngcontent-%COMP%]   #no_noti_cnt[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px!important;font-weight:600!important;margin-top:16px}#container[_ngcontent-%COMP%]   #no_noti_cnt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.active[_ngcontent-%COMP%]{background-color:#ffc600}.change[_ngcontent-%COMP%]{display:none}.single_noti_back[_ngcontent-%COMP%]{background-color:#fff!important}.single_noti_back[_ngcontent-%COMP%]   .msg_date[_ngcontent-%COMP%]{color:#000!important}"]}),i})()}];let T=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[r.Bz.forChild(y)],r.Bz]}),i})(),Z=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[s.ez,T,p.m]]}),i})()}}]);